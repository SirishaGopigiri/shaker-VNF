<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head profile="http://gmpg.org/xfn/11">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

  <title>Shaker | The distributed data-plane testing tool for OpenStack</title>

  <!-- LIBS -->

  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.js"></script>
  <script type="text/javascript"
          src="https://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.1/handlebars.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/3.2.7/js-yaml.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.js"></script>

  <!-- STYLES -->

  <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.4/simplex/bootstrap.min.css">
  <link rel=stylesheet type=text/css
        href="https://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
  <link rel=stylesheet type=text/css
        href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.css">
  <link rel='stylesheet' type='text/css'
        href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic&subset=latin,cyrillic'>

  <script type="application/javascript">
    var report = {"scenarios": {"OpenStack VNF test": {"title": "OpenStack VNF test", "description": "In this scenario Shaker launches pairs of instances. Instances are connected to one of 2 tenant networks, which plugged into the router VNF. The traffic goes from one network to the other (L3 east-west).", "deployment": {"template": "vyos_test.hot", "accommodation": ["pair", "best_effort"]}, "execution": {"progression": "quadratic", "tests": [{"title": "Download", "class": "flent", "method": "tcp_download"}, {"title": "Upload", "class": "flent", "method": "tcp_upload"}, {"title": "Bi-directional", "class": "flent", "method": "tcp_bidirectional"}]}, "file_name": "vyos_test.yaml"}}, "records": {"89540dad-5d8f-4fd7-8070-413fa32a27cc": {"status": "ok", "stderr": "", "start": 1618736982.8469536, "finish": 1618737063.6921806, "command": {"type": "script", "data": "zcat `flent -H 40.0.0.25 -l 60 -s 1 tcp_download 2>&1 | grep \"file written\" | grep -Po \"\\./\\S+gz\"`"}, "meta": [["time", "s"], ["ping_icmp", "ms"], ["tcp_download", "Mbits/s"]], "samples": [[0.0, 15.1, null], [1.0, 5.317713807976183, null], [2.0, 3.821749877067768, null], [3.0, 1.5792959532946875, null], [4.0, 3.6686977610988936, null], [5.0, 3.4116175979982333, null], [6.0, 11.452717389071644, 77.62], [7.0, 9.59065387808506, 76.59768007993698], [8.0, 10.591557175943702, 75.37692386388778], [9.0, 7.700971739178691, 72.40375013397647], [10.0, 6.34028254303026, 83.2719122672081], [11.0, 10.15193953568049, 57.83404104709625], [12.0, 6.51753269637843, 68.7081058716774], [13.0, 5.193505121345194, 76.54002695487125], [14.0, 5.88121086871122, 66.71859780659645], [15.0, 7.267991866335111, 79.34677153587342], [16.0, 5.616570024694231, 88.38942109535363], [17.0, 5.982920919930195, 89.12168425083159], [18.0, 6.068490233177311, 83.7558985900879], [19.0, 8.981447158679472, 79.1553211259842], [20.0, 10.170760841204032, 67.60916901111604], [21.0, 6.154386896721551, 60.7974569773674], [22.0, 8.134698555201748, 75.34448079824448], [23.0, 5.1457906442945, 80.29819359779357], [24.0, 7.66527626005389, 80.44570434533823], [25.0, 4.898940448753812, 68.05156884908676], [26.0, 9.083875056386134, 77.55287949566497], [27.0, 9.58704247158097, 79.89780766157969], [28.0, 9.204904751133377, 72.9745944110026], [29.0, 8.14960035867325, 76.09324210166932], [30.0, 10.499610171741905, 84.24007103034802], [31.0, 178.32665401219586, 64.75274803513065], [32.0, 21.50248877559025, 60.470053548812864], [33.0, 9.30130158089334, 76.28430150632406], [34.0, 5.87458885937842, 83.9355237364769], [35.0, 5.797016920621942, 66.45885512590408], [36.0, 8.220815438877333, 70.93061686980198], [37.0, 6.184714605666988, 75.61200212955474], [38.0, 9.799479953640823, 79.62972135749499], [39.0, 6.547958291106564, 77.49375106811523], [40.0, 9.201195488393422, 62.63909683045946], [41.0, 11.942736244259093, 69.44439194683432], [42.0, 7.750329640359712, 79.94331469535828], [43.0, 6.365533613379288, 81.81029229164123], [44.0, 8.522712936091738, 85.74894281387328], [45.0, 6.323117830479423, 82.72138055801392], [46.0, 7.24228686580867, 78.17507461547852], [47.0, 5.485537658071055, 70.99866022929922], [48.0, 6.345632641393577, 70.74587912082673], [49.0, 6.709585595974995, 80.10970643043518], [50.0, 12.367097324933269, 83.53113203525544], [51.0, 10.571608645003593, 74.42687259980032], [52.0, 8.197499461306794, 62.619057941436765], [53.0, 10.501869441677602, 73.8592179965973], [54.0, 11.161675882694205, 73.08983922028185], [55.0, 11.8448577990284, 64.34719555854798], [56.0, 8.46453638442098, 58.984550198666284], [57.0, 8.18, 72.20949550151825], [58.0, 66.68940656912805, 65.13307262599018], [59.0, 15.259089487605742, 56.959053382873535], [60.0, 7.687034960364738, 66.5335572052002], [61.0, 7.9519053585308965, 78.35724884907103], [62.0, 8.072433904378798, 77.03755026817322], [63.0, 11.923930850927608, 68.94552498795429], [64.0, 16.552006912414008, 58.22684073045545], [65.0, 8.816820612593942, 63.73375780842801], [66.0, 4.4909423132449025, 61.34], [67.0, 3.364897835623469, null], [68.0, 3.2626266919094715, null], [69.0, 3.496748343231468, null]], "schedule": 1618736982.8357158, "id": "89540dad-5d8f-4fd7-8070-413fa32a27cc", "agent": "test_primary_0", "node": "harrypotter", "concurrency": 1, "test": "Download", "executor": "flent", "type": "agent", "scenario": "OpenStack VNF test", "stats": {"ping_icmp": {"max": 178.32665401219586, "min": 1.5792959532946875, "avg": 11.360463261923174, "unit": "ms"}, "tcp_download": {"max": 89.12168425083159, "min": 56.959053382873535, "avg": 73.36694397906034, "unit": "Mbits/s"}}}, "0e3ecfcc-7264-4f77-93d9-be09da6de686": {"status": "ok", "stderr": "", "start": 1618737084.6585178, "finish": 1618737160.0980732, "command": {"type": "script", "data": "zcat `flent -H 40.0.0.25 -l 60 -s 1 tcp_upload 2>&1 | grep \"file written\" | grep -Po \"\\./\\S+gz\"`"}, "meta": [["time", "s"], ["ping_icmp", "ms"], ["tcp_upload", "Mbits/s"]], "samples": [[0.0, 2.5, null], [1.0, 4.950674789039358, null], [2.0, 4.412532973006969, null], [3.0, 4.23110870498259, null], [4.0, 3.8627401566365758, null], [5.0, 6.095518427483401, null], [6.0, 63.74783130820919, 81.12], [7.0, 9.502637187425464, 94.33893112727456], [8.0, 6.984782713277551, 89.49728877399087], [9.0, 3.904721351297373, 75.4986696454449], [10.0, 3.6829113118202597, 88.77686567125346], [11.0, 7.942492484723044, 93.38779154735998], [12.0, 84.41030620476386, 67.44225832952773], [13.0, 85.7184380909937, 65.2543313451193], [14.0, 8.265838263942896, 86.5186996536841], [15.0, 4.736265634840146, 87.5649979454416], [16.0, 7.925697129774781, 89.61037520654668], [17.0, 8.601859438602654, 90.29881915400641], [18.0, 4.644583477317014, 88.32092586370831], [19.0, 6.486370860845348, 90.74146756410599], [20.0, 6.617670751868497, 87.25895788318488], [21.0, 7.266479893308177, 85.69121286760823], [22.0, 4.720437703975724, 85.47513524899796], [23.0, 176.91923808854992, 71.42413300290353], [24.0, 16.961487435172415, 67.23643150206068], [25.0, 4.025077736158124, 79.1648629117012], [26.0, 11.626368205758013, 81.28065278777296], [27.0, 12.190398796158947, 72.46535545226932], [28.0, 10.352258998390164, 67.126471974025], [29.0, 8.41121195484348, 68.89417473659614], [30.0, 8.824082533574636, 70.06084070194778], [31.0, 9.81737228314884, 68.40235119141971], [32.0, 12.916814378409427, 70.74351660252178], [33.0, 10.114423233433893, 74.15810673770005], [34.0, 11.127788085241809, 69.38529219543335], [35.0, 5.570259877719551, 64.54882018127248], [36.0, 6.04536206219195, 71.49297667237781], [37.0, 10.426248686835358, 85.64002372288999], [38.0, 7.413146131490401, 85.31950354880347], [39.0, 7.755250746728956, 82.34421317514175], [40.0, 8.07136611387486, 84.33335394962369], [41.0, 7.236912088854991, 85.47504990347713], [42.0, 5.228592895604425, 80.4582593721316], [43.0, 7.007807112999846, 75.64140527601698], [44.0, 10.08121515773924, 82.36922890964269], [45.0, 5.208729008405614, 46.78597940472373], [46.0, 8.085859651020774, 80.04962841373074], [47.0, 3.7410472979600664, 83.74669800167952], [48.0, 4.990890785647218, 78.30365506431473], [49.0, 8.929250007114467, 81.33805028784879], [50.0, 19.78841463649993, 67.38482647314174], [51.0, 10.065332546885225, 74.53346895498291], [52.0, 2.9138409358317743, 79.15166545852244], [53.0, 180.7122162584839, 68.20808436136942], [54.0, 31.722746557866913, 71.1676329506689], [55.0, 9.076908536576672, 76.66397240896072], [56.0, 8.077559917471117, 77.51591902177928], [57.0, 23.288240003184182, 65.47567365408518], [58.0, 28.482954391003585, 60.02657873632263], [59.0, 39.48144789345494, 77.31639650093608], [60.0, 14.075041545637617, 79.79499981941564], [61.0, 3.7591639466924267, 79.4410321874101], [62.0, 2.950231979687815, 77.61140573681412], [63.0, 8.136565760429527, 83.94090565642544], [64.0, 7.116755055757624, 81.39734822775527], [65.0, 13.030259444645635, 78.16], [66.0, 4.629332372964413, null], [67.0, 1.7115108727197024, null], [68.0, 3.6618395605585228, null], [69.0, 3.8268157744275997, null]], "schedule": 1618737084.6472805, "id": "0e3ecfcc-7264-4f77-93d9-be09da6de686", "agent": "test_primary_0", "node": "harrypotter", "concurrency": 1, "test": "Upload", "executor": "flent", "type": "agent", "scenario": "OpenStack VNF test", "stats": {"ping_icmp": {"max": 180.7122162584839, "min": 1.7115108727197024, "avg": 16.668536231456304, "unit": "ms"}, "tcp_upload": {"max": 94.33893112727456, "min": 46.78597940472373, "avg": 77.87959456093117, "unit": "Mbits/s"}}}, "590984c4-2c5b-458d-b9d3-834960473923": {"status": "ok", "stderr": "", "start": 1618737181.0579064, "finish": 1618737256.528266, "command": {"type": "script", "data": "zcat `flent -H 40.0.0.25 -l 60 -s 1 tcp_bidirectional 2>&1 | grep \"file written\" | grep -Po \"\\./\\S+gz\"`"}, "meta": [["time", "s"], ["ping_icmp", "ms"], ["tcp_download", "Mbits/s"], ["tcp_upload", "Mbits/s"]], "samples": [[0.0, 2.35, null, null], [1.0, 4.978387430317115, null, null], [2.0, 3.885337113329336, null, null], [3.0, 4.098599258821255, null, null], [4.0, 4.080157462132457, null, null], [5.0, 1.7624347413813215, null, null], [6.0, 10.907094804684073, 44.81, 35.18], [7.0, 12.467169411755194, 42.33006891386833, 52.88497327626456], [8.0, 6.260303230283552, 33.05404094750075, 55.33725688534017], [9.0, 11.364267786509544, 32.82975208997726, 59.43837872352541], [10.0, 13.925894588702503, 28.367179256300442, 44.21350034132876], [11.0, 11.376283221511448, 30.64397261714, 40.69792230886797], [12.0, 94.39459993860154, 36.474650813124576, 33.2107008491717], [13.0, 27.36454701653342, 42.41622645260392, 33.3833102996594], [14.0, 8.939559243735658, 37.86181907191707, 43.928477692906], [15.0, 8.322451373266626, 13.630957249386544, 21.469925879247665], [16.0, 8.159998968329113, 39.57279333817467, 38.88939841418553], [17.0, 13.508193697581847, 38.13668976133659, 48.468289127827354], [18.0, 10.444969966255211, 42.31522034954437, 46.608730108058666], [19.0, 9.873424531227595, 40.61542325374455, 43.04431426167054], [20.0, 14.346576219217495, 43.205854635238644, 38.37814031203028], [21.0, 30.52008486318099, 31.536418771743776, 35.23794161116619], [22.0, 21.55650181936958, 39.75696808815002, 35.12738700301024], [23.0, 16.643917075662447, 32.66239225305548, 32.70343226834155], [24.0, 23.86409279555195, 36.86366260505543, 34.15872278114173], [25.0, 19.663745727170884, 33.29453051934928, 40.88374666588346], [26.0, 9.070171446345766, 40.40823689609072, 34.240194313423956], [27.0, 8.432997412662171, 43.82824700166583, 33.686966772476964], [28.0, 11.525347038859527, 43.281374654802086, 40.27091840776086], [29.0, 17.261793812487184, 38.073757353411686, 46.20338960376164], [30.0, 8.636405830964634, 37.930893144607545, 41.902339536183], [31.0, 12.359054947391451, 38.42340107643851, 45.874229225247845], [32.0, 14.161780084933621, 44.279180374145504, 42.27555590248108], [33.0, 17.740759214899974, 28.650794677734375, 24.98755590248108], [34.0, 21.532095832494463, 21.416495666503906, 33.31999811737985], [35.0, 168.46125935510773, 22.252753935579538, 47.92461914756834], [36.0, 189.09159325780325, 27.208491325378418, 41.36900129247973], [37.0, 38.722465657274626, 35.2260619019202, 36.46180637720172], [38.0, 66.72981223877224, 31.31997004277487, 32.35107744951273], [39.0, 38.10462390180585, 31.783316057313833, 24.811422416679424], [40.0, 23.072293280230266, 39.775295633089264, 36.420274606905416], [41.0, 19.71813025506214, 35.12793412208557, 39.98053254644228], [42.0, 24.736783385923005, 30.55433308903968, 46.94673605822287], [43.0, 19.722052327263672, 29.357488746643067, 35.96350292374092], [44.0, 12.88471705309559, 34.25546208918803, 32.29934762912299], [45.0, 9.811711096716923, 38.83429461956025, 41.32446993509928], [46.0, 10.882521234507337, 37.69691082741229, 47.96418961854139], [47.0, 12.47943444902959, 36.66057976166655, 47.528564626988064], [48.0, 11.148847024586114, 36.759401700464856, 46.78151919613053], [49.0, 10.10735011355025, 31.10650069494526, 45.41860895598541], [50.0, 14.022708854140866, 29.213339220007374, 34.237057328543834], [51.0, 14.870770675461905, 30.5339254283905, 26.045835249671484], [52.0, 9.649739638161481, 32.08043249744636, 29.490565867279898], [53.0, 11.700800085943026, 43.31356286314514, 39.06447944232166], [54.0, 79.68074903430546, 24.6240531873703, 28.942564446473327], [55.0, 21.918440093085323, 33.083920335769655, 25.589416181516462], [56.0, 11.832608654465087, 32.30412729740143, 29.74096809551145], [57.0, 16.058694627268483, 33.1918860578537, 35.6865231708572], [58.0, 11.28196280944722, 40.56512733302899, 32.10285393688968], [59.0, 10.215386719797255, 35.21948624734697, 43.32509957318616], [60.0, 12.222560702752466, 40.83874772915082, 40.828485753393174], [61.0, 12.347733228140335, 30.83407966035111, 31.864483637559438], [62.0, 10.305745902316161, 37.49219561600145, 43.10707878832398], [63.0, 18.714403676895753, 39.71726017268419, 40.56771548664594], [64.0, 20.251653702890636, 30.289876034173176, 39.1163031898982], [65.0, 318.5440457441992, 31.29, 51.080992454617174], [66.0, 219.5941515223522, null, 51.3], [67.0, 3.7992903268061955, null, null], [68.0, 2.703169066954631, null, null], [69.0, 1.7064795144085512, null, null]], "schedule": 1618737181.0466533, "id": "590984c4-2c5b-458d-b9d3-834960473923", "agent": "test_primary_0", "node": "harrypotter", "concurrency": 1, "test": "Bi-directional", "executor": "flent", "type": "agent", "scenario": "OpenStack VNF test", "stats": {"ping_icmp": {"max": 318.5440457441992, "min": 1.7064795144085512, "avg": 28.46962410166673, "unit": "ms"}, "tcp_download": {"max": 44.81, "min": 13.630957249386544, "avg": 34.98636360099657, "unit": "Mbits/s"}, "tcp_upload": {"max": 59.43837872352541, "min": 21.469925879247665, "avg": 39.04330806514974, "unit": "Mbits/s"}}}, "c9c29746-13f8-4652-8105-258b6dc05073": {"stats": {"ping_icmp": {"unit": "ms", "avg": 11.360463261923174, "max": 178.32665401219586, "min": 1.5792959532946875}, "tcp_download": {"unit": "Mbits/s", "avg": 73.36694397906034, "max": 89.12168425083159, "min": 56.959053382873535}}, "node_chart": [["x", "harrypotter"], ["Avg ping_icmp, ms", 11.360463261923174], ["Max ping_icmp, ms", 178.32665401219586], ["Min ping_icmp, ms", 1.5792959532946875], ["Avg tcp_download, Mbits/s", 73.36694397906034], ["Max tcp_download, Mbits/s", 89.12168425083159], ["Min tcp_download, Mbits/s", 56.959053382873535]], "id": "c9c29746-13f8-4652-8105-258b6dc05073", "scenario": "OpenStack VNF test", "test": "Download", "concurrency": 1, "type": "concurrency"}, "039baab3-d195-465a-9fd7-8b0aae2981cf": {"chart": [["concurrency", 1], ["ping_icmp", 11.360463261923174], ["tcp_download", 73.36694397906034]], "meta": [["concurrency", ""], ["ping_icmp", "ms"], ["tcp_download", "Mbits/s"]], "id": "039baab3-d195-465a-9fd7-8b0aae2981cf", "scenario": "OpenStack VNF test", "test": "Download", "type": "test"}, "5fdef0b0-324e-4112-bb50-b60123dd2466": {"stats": {"ping_icmp": {"unit": "ms", "avg": 16.668536231456304, "max": 180.7122162584839, "min": 1.7115108727197024}, "tcp_upload": {"unit": "Mbits/s", "avg": 77.87959456093117, "max": 94.33893112727456, "min": 46.78597940472373}}, "node_chart": [["x", "harrypotter"], ["Avg ping_icmp, ms", 16.668536231456304], ["Max ping_icmp, ms", 180.7122162584839], ["Min ping_icmp, ms", 1.7115108727197024], ["Avg tcp_upload, Mbits/s", 77.87959456093117], ["Max tcp_upload, Mbits/s", 94.33893112727456], ["Min tcp_upload, Mbits/s", 46.78597940472373]], "id": "5fdef0b0-324e-4112-bb50-b60123dd2466", "scenario": "OpenStack VNF test", "test": "Upload", "concurrency": 1, "type": "concurrency"}, "c706648e-d3db-4428-852a-604eb4fb833e": {"chart": [["concurrency", 1], ["ping_icmp", 16.668536231456304], ["tcp_upload", 77.87959456093117]], "meta": [["concurrency", ""], ["ping_icmp", "ms"], ["tcp_upload", "Mbits/s"]], "id": "c706648e-d3db-4428-852a-604eb4fb833e", "scenario": "OpenStack VNF test", "test": "Upload", "type": "test"}, "c65efe97-e355-4959-98a7-762079262e1c": {"stats": {"ping_icmp": {"unit": "ms", "avg": 28.46962410166673, "max": 318.5440457441992, "min": 1.7064795144085512}, "tcp_download": {"unit": "Mbits/s", "avg": 34.98636360099657, "max": 44.81, "min": 13.630957249386544}, "tcp_upload": {"unit": "Mbits/s", "avg": 39.04330806514974, "max": 59.43837872352541, "min": 21.469925879247665}}, "node_chart": [["x", "harrypotter"], ["Avg ping_icmp, ms", 28.46962410166673], ["Max ping_icmp, ms", 318.5440457441992], ["Min ping_icmp, ms", 1.7064795144085512], ["Avg tcp_download, Mbits/s", 34.98636360099657], ["Max tcp_download, Mbits/s", 44.81], ["Min tcp_download, Mbits/s", 13.630957249386544], ["Avg tcp_upload, Mbits/s", 39.04330806514974], ["Max tcp_upload, Mbits/s", 59.43837872352541], ["Min tcp_upload, Mbits/s", 21.469925879247665]], "id": "c65efe97-e355-4959-98a7-762079262e1c", "scenario": "OpenStack VNF test", "test": "Bi-directional", "concurrency": 1, "type": "concurrency"}, "3f36a923-9d18-40b0-ad2b-a64685211a84": {"chart": [["concurrency", 1], ["ping_icmp", 28.46962410166673], ["tcp_download", 34.98636360099657], ["tcp_upload", 39.04330806514974]], "meta": [["concurrency", ""], ["ping_icmp", "ms"], ["tcp_download", "Mbits/s"], ["tcp_upload", "Mbits/s"]], "id": "3f36a923-9d18-40b0-ad2b-a64685211a84", "scenario": "OpenStack VNF test", "test": "Bi-directional", "type": "test"}}, "agents": {"test_primary_0": {"id": "test_primary_0", "mode": "primary", "minion_id": "test_minion_0", "node": "harrypotter", "zone": "nova", "availability_zone": "nova:harrypotter", "ip": "30.0.0.25", "minion": {"id": "test_minion_0", "mode": "minion", "primary_id": "test_primary_0", "node": "hermionegranger", "zone": "nova", "availability_zone": "nova:hermionegranger", "ip": "40.0.0.25"}}, "test_minion_0": {"id": "test_minion_0", "mode": "minion", "primary_id": "test_primary_0", "node": "hermionegranger", "zone": "nova", "availability_zone": "nova:hermionegranger", "ip": "40.0.0.25", "primary": {"id": "test_primary_0", "mode": "primary", "minion_id": "test_minion_0", "node": "harrypotter", "zone": "nova", "availability_zone": "nova:harrypotter", "ip": "30.0.0.25"}}}, "tests": {"Download": {"title": "Download", "class": "flent", "method": "tcp_download"}, "Upload": {"title": "Upload", "class": "flent", "method": "tcp_upload"}, "Bi-directional": {"title": "Bi-directional", "class": "flent", "method": "tcp_bidirectional"}}, "sla": []};
  </script>

  <script type="text/javascript">
    "use strict";

    $(function () {

      var fields = ["scenario", "test", "concurrency", "node", "agent"];
      var state = {
        scenario: "",
        test: "",
        concurrency: "",
        node: "",
        agent: ""
      };
      var tablePageSize = 10;

      // compiled templates
      var scenario_source_template = Handlebars.compile($("#scenario_source_template").html());
      var test_specification_template = Handlebars.compile($("#test_specification_template").html());
      var agents_table_template = Handlebars.compile($("#agents_table_template").html());
      var records_table_template = Handlebars.compile($("#records_table_template").html());
      var executor_template = Handlebars.compile($("#executor_template").html());
      var concurrency_summary_template = Handlebars.compile($("#concurrency_summary_template").html());
      var test_summary_template = Handlebars.compile($("#test_summary_template").html());
      var sla_table_template = Handlebars.compile($("#sla_table_template").html());
      var errors_template = Handlebars.compile($("#errors_template").html());

      function concatenate(strings) {
        // returns strings concatenated via comma (like join() but omits empty strings)
        var f = false;
        var result = "";
        $.each(strings, function (_i, string) {
          if (string.length > 0) {
            if (f) result += ", ";
            result += string;
            f = true;
          }
        });
        return result;
      }

      function initSingleSelector(name, values) {
        var selectorId = "#" + name + "_selector";

        var selector_inst = $(selectorId);
        selector_inst.empty();
        selector_inst.append($("<option>", {
          style: "font-style: italic; text-decoration: underline;",
          value: "",
          text: selector_inst.data('placeholder')
        }));

        $.each(values, function (key, item) {
          selector_inst.append($('<option>', {
            value: item, //(key + 1),
            text: item
          }));
        });

        selector_inst.val(state[name]);

        selector_inst.
            on("change", function (e) {
              state[name] = this.value;

              // convert state -> url
              var tokens = [];
              $.each(fields.sort(), function (i, field) {
                if (state[field] != "") {
                  tokens.push(field + "=" + state[field]);
                }
              });
              window.location.href = "#" + tokens.join(":");
            });
      }

      function getFieldValues(field, records) {
        var values_set = {};

        $.each(records, function (j, record) {
          if (record[field]) {
            values_set["" + record[field]] = true;
          }
        });

        return $.map(values_set, function (_i, value) {
          return value;
        }).sort();
      }

      function updateSelectors() {
        $.each(fields, function (i, field) {
          var values = getFieldValues(field, filterRecords(report.records, null, field));
          console.log(values);
          initSingleSelector(field, values);
        });
      }

      function filterRecords(records, type, except_field) {
        var res = [];
        $.each(records, function(_i, record){
          if (!type || typeof type === 'undefined' || record.type == type) {
            var flag = true;
            $.each(state, function (key, value) {
              if (key != except_field && value) {
                flag &= record[key] == value;
              }
            });
            if (flag) {
              res.push(record);
            }
          }
        });
        return res;
      }

      function getAgentsByIds(agent_ids) {
        var agents = [];
        $.each(agent_ids, function(agent_id){
          agents.push(report.agents[agent_id]);
        });
        return agents;
      }

      /* Template Rendering Funcs */

      function showScenarioSource(contentArea, scenario) {
        contentArea.append(scenario_source_template(
            {data: jsyaml.safeDump(scenario)}));
      }

      function showTestSpecification(contentArea, test) {
        contentArea.append(test_specification_template(
            {data: jsyaml.safeDump(test)}
        ))
      }

      function showAgentRecord(contentArea, record) {
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var ext_options = {
          command_yaml: jsyaml.safeDump(record["command"]),
          chart_id: chart_id};
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        if ((record["start"]) && (record["finish"])) {
          ext_options["time_info"] = jsyaml.safeDump({
            "start": new Date(record["start"] * 1000).toISOString(),
            "finish": new Date(record["finish"] * 1000).toISOString()
          });
        }
        contentArea.append(executor_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["samples"]) {
          var meta = record["meta"];
          var axes = [];
          axes[meta[1][0]] = 'y';
          var axis = {
            x: {label: concatenate(meta[0])},
            y: {label: concatenate(meta[1]), min: 0}
          };
          if (meta.length > 2) {
            axes[meta[2][0]] = 'y2';
            axis['y2'] = {label: concatenate(meta[2]), min: 0, show: true}
          }

          var chart = [];
          $.each(meta, function(_i, meta_item){  // row titles
            chart.push([meta_item[0]]);
          });
          var samples = record["samples"];
          for (var i=0; i < samples.length; i++) {
            var point = samples[i];
            for (var j=0; j < point.length; j++) {
              chart[j].push(point[j]);
            }
          }

          c3.generate({
            bindto: "#" + chart_id,
            data: {
              x: 'time',
              columns: chart,
              axes: axes
            },
            axis: axis
          });
        }
      }

      function showConcurrencySummary(contentArea, record) {
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var node_chart_id = "node_chart_" + Math.round(Math.random() * 10000);
        var ext_options = { chart_id: chart_id, node_chart_id: node_chart_id };
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        console.log(record);
        contentArea.append(concurrency_summary_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["node_chart"]) {
          c3.generate({
            bindto: "#" + node_chart_id,
            data: {
              x: 'x',
              columns: record["node_chart"],
              type: 'step',
              order: null
            },
            axis: {
              x: { type: 'category' }
            }
          });
        }
      }

      function showTestSummary(contentArea, record) {
        console.log(record);
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var ext_options = { chart_id: chart_id };
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        contentArea.append(test_summary_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["chart"]) {
          var meta = record["meta"];
          var axes = [];
          axes[meta[1][0]] = 'y';
          var axis = {
            x: {label: concatenate(meta[0])},
            y: {label: concatenate(meta[1]), min: 0}
          };
          if (meta.length > 2) {
            axes[meta[2][0]] = 'y2';
            axis['y2'] = {label: concatenate(meta[2]), min: 0, show: true}
          }

          c3.generate({
            bindto: "#" + chart_id,
            data: {
              x: 'concurrency',
              columns: record["chart"],
              axes: axes
            },
            axis: axis
          });
        }
      }

      function showAgentsTable(contentArea, filteredRecords) {
        var agent_ids = {};
        $.each(filteredRecords, function(_i, record){
          if (record.agent) {
            agent_ids[record.agent] = true;
          }
        });

        var agents = getAgentsByIds(agent_ids);
        if (agents.length == 0) return;

        // add minion agents
        var minion_agent_ids = {};
        $.each(agents, function(_i, agent){
          if (agent.minion_id) {
            minion_agent_ids[agent.minion_id] = true;
          }
        });
        agents = $.merge(agents, getAgentsByIds(minion_agent_ids));

        contentArea.append(agents_table_template({
          agents: agents,
          table_id: "agents_table"
        }));
        $("#agents_table").dataTable({
          "autoWidth": true,
          "paging": false,
          "ordering": true,
          "info": false
        });
      }

      function makeURL(record, s) {
        var extra = {};
        extra[s] = record[s];
        return "#" + $.map($.extend({}, state, extra), function (val, index) {
          return val? (index + "=" + val) : null;
        }).join(":")
      }

      function showRecordsTable(contentArea, filteredRecords) {
        $.each(filteredRecords, function(_i, record) {
          $.each(fields, function(_j, field){
            if (record[field]) {
              record[field + "_url"] = makeURL(record, field);
            }
          });
        });

        contentArea.append(records_table_template({
          records: filteredRecords,
          table_id: "records_table"
        }));
        $("#records_table").dataTable({
          autoWidth: true,
          paging: filteredRecords.length > tablePageSize,
          ordering: true,
          info: false,
          searching: filteredRecords.length > tablePageSize
        });
      }

      function showSlaTable(contentArea, records) {
        if (records.length == 0) return;

        contentArea.append(sla_table_template({
          records: records,
          table_id: "sla_table"
        }));
        $("#records_table").dataTable({
          autoWidth: true,
          paging: records.length > tablePageSize,
          ordering: true,
          info: false,
          searching: records.length > tablePageSize
        });
      }

      function showErrors(contentArea, records) {
        if (records.length == 0) return;

        contentArea.append(errors_template({
          records: records,
          table_id: "errors_list"
        }));
      }

      /* Update cycle */

      function update() {
        var filteredRecords = filterRecords(report.records);
        console.log(filteredRecords);
        var slaRecords = [];
        var errorRecords = [];
        $.each(filterRecords(report.records), function(_i, record) {
          if (record["sla_info"]) {
            slaRecords.push(record);
          }
          if (record["is_status_error"]) {
            errorRecords.push(record);
          }
        });

        var contentArea = $("#content_area");
        contentArea.empty();

        updateSelectors();

        showRecordsTable(contentArea, filteredRecords);
        showSlaTable(contentArea, slaRecords);
        showErrors(contentArea, errorRecords);

        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] != "" &&
                state["agent"] != "") {
          showAgentRecord(contentArea, filteredRecords[0]);
        }
        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] != "" && state["node"] == "" &&
                state["agent"] == "") {
          var agg_recs = filterRecords(report.records, "concurrency");
          if (agg_recs.length > 0) {
            showConcurrencySummary(contentArea, agg_recs[0]);
          }
        }
        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] == "" && state["node"] == "" &&
                state["agent"] == "") {
          var test_recs = filterRecords(report.records, "test");
          if (test_recs.length > 0) {
            showTestSummary(contentArea, test_recs[0]);
          }
        }
        if (state["test"] != "") {
          showTestSpecification(contentArea, report.tests[state["test"]]);
        }
        if (state["agent"] == "") {
          showAgentsTable(contentArea, filteredRecords);
        }
        if (state["scenario"] != "") {
          showScenarioSource(contentArea, report.scenarios[state["scenario"]]);
        }
      }

      function parseUrlToState() {
        var hashUrl = window.location.hash.substr(1);

        $.each(hashUrl.split(":"), function (_i, pair) {
          var kv = pair.split("=");
          if (kv.length == 2) {
            state[kv[0]] = decodeURIComponent(kv[1]);
          }
        });
      }

      // entry-point
      parseUrlToState();
      console.log(state);

      // change the status of tests that have sla failures
      // to "fail", only if they were previously marked "ok"
      $.each(report.sla, function(_i, sla) {
        if (sla.state == "FAIL" && report.records[sla.record].status == "ok") {
          report.records[sla.record].status = "fail";
        }
      });
      // pre-process records
      $.each(report.records, function(_i, record) {
        if (record.status) {
          record["is_status_ok"] = record.status == "ok";
          record["is_status_lost"] = record.status == "lost";
          record["is_status_interrupted"] = record.status == "interrupted";
          record["is_status_error"] = record.status == "error";
          record["is_status_fail"] = record.status == "fail";
        }
      });

      // auto-select filters with 1 option
      $.each(fields, function(_i, field) {
        var values = getFieldValues(field, report.records);
        if (values.length == 1) {
          state[field] = values[0];
        }
      });

      update();

      $(window).on('hashchange', function() {
        parseUrlToState();
        update()
      });

      $('[data-toggle="tooltip"]').tooltip();
    });
  </script>

  <style type="text/css">
  </style>

</head>

<body>

<div class="container" id="container">
  <div class="row text-center">
    <h1>Shaker | The Report</h1>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-2">
      <label for="scenario_selector" title="Scenario name">Scenario</label>
      <select id="scenario_selector" class="form-control" data-placeholder="- Any scenario -"></select>
    </div>
    <div class="col-md-2">
      <label for="test_selector" title="Test name">Test Case</label>
      <select id="test_selector" class="form-control" data-placeholder="- Any test case -"></select>
    </div>
    <div class="col-md-2">
      <label for="concurrency_selector" title="Concurrency">Concurrency</label>
      <select id="concurrency_selector" class="form-control" data-placeholder="- Any concurrency -"></select>
    </div>
    <div class="col-md-2">
      <label for="node_selector" title="Host / Compute node">Host</label>
      <select id="node_selector" class="form-control" data-placeholder="- Any node -"></select>
    </div>
    <div class="col-md-2">
      <label for="agent_selector" title="Agent">Agent</label>
      <select id="agent_selector" class="form-control" data-placeholder="- Any agent -"></select>
    </div>
  </div>

  <div id="content_area" class="row">
    <!-- Container for the screen content -->
  </div>

  <div id="footer" class="row">&nbsp;</div>
</div>

<!-- TEMPLATES --------------------------------------------------------------->

<!-- Scenario File -->
<script id="scenario_source_template" type="text/x-handlebars-template">
  <h3>Scenario</h3>
  <pre>{{ data }}</pre>
</script>

<!-- Test Specification -->
<script id="test_specification_template" type="text/x-handlebars-template">
  <h3>Test Specification</h3>
  <pre>{{ data }}</pre>
</script>

<!-- Executor Result -->
<script id="executor_template" type="text/x-handlebars-template">
  <h3>Execution Summary</h3>
  {{#with record}}
  <div id="{{ chart_id }}"></div>
  {{#if is_status_ok}}<span class="label label-success"><span class="glyphicon glyphicon-ok" aria-hidden="true"></span>success</span>{{/if}}
  {{#if is_status_lost}}<span class="label label-danger"><span class="glyphicon glyphicon-alert" aria-hidden="true"></span>lost</span>{{/if}}
  {{#if is_status_interrupted}}<span class="label label-warning"><span class="glyphicon glyphicon-stop" aria-hidden="true"></span>interrupted</span>{{/if}}
  {{#if is_status_error}}<span class="label label-danger"><span class="glyphicon glyphicon-alert" aria-hidden="true"></span>error</span>{{/if}}
  {{#if is_status_fail}}<span class="label label-danger"><span class="glyphicon glyphicon-alert" aria-hidden="true"></span>sla fail</span>{{/if}}
  {{#if stats_yaml}}
    <h4>Stats</h4>
    <pre>{{ stats_yaml }}</pre>
  {{/if}}
  {{#if time_info}}
    <h4>Time Info</h4>
    <pre>{{ time_info }}</pre>
  {{/if}}
  <h4>Command</h4>
  <pre>{{ command_yaml }}</pre>
  {{#if stdout}}
    <h4>Stdout</h4>
    <pre>{{ stdout }}</pre>
  {{/if}}
  {{#if verbose}}
    <h4>Verbose Info</h4>
    <pre>{{ verbose }}</pre>
  {{/if}}
  {{#if stderr}}
    <h4>Stderr</h4>
    <pre>{{ stderr }}</pre>
  {{/if}}
  {{/with}}
</script>

<!-- Concurrency summary -->
<script id="concurrency_summary_template" type="text/x-handlebars-template">
  {{#with record}}
  <div id="{{ chart_id  }}"></div>
  <h3>Per-node chart</h3>
  <div id="{{ node_chart_id  }}"></div>
  <h3>Stats</h3>
  <pre>{{ stats_yaml }}</pre>
  {{/with}}
</script>

<!-- Test summary -->
<script id="test_summary_template" type="text/x-handlebars-template">
  {{#with record}}
  <div id="{{ chart_id   }}"></div>
  {{#if stats_yaml}}
    <h3>Stats</h3>
    <pre>{{ stats_yaml }}</pre>
  {{/if}}
  {{/with}}
</script>

<!-- Records Table -->
<script id="records_table_template" type="text/x-handlebars-template">
  <h3>Records</h3>
  <table class="table table-striped" id="{{ table_id  }}">
    <thead>
    <tr>
      <th>Scenario</th>
      <th>Test Case</th>
      <th>Concurrency</th>
      <th>Host / Compute Node</th>
      <th>Agent</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody>
    {{#records}}
    <tr>
      <td><a href="{{ scenario_url }}">{{ scenario }}</a></td>
      <td><a href="{{ test_url }}">{{ test }}</a></td>
      <td><a href="{{ concurrency_url }}">{{ concurrency }}</a></td>
      <td><a href="{{ node_url }}">{{ node }}</a></td>
      <td><a href="{{ agent_url }}">{{ agent }}</a></td>
      <td>
        {{#if is_status_ok }}
          <span class="label label-success">
            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
            success
          </span>
        {{/if}}
        {{#if is_status_lost }}
          <span class="label label-danger">
            <span class="glyphicon glyphicon-alert" aria-hidden="true"></span>
            lost
          </span>
        {{/if}}
        {{#if is_status_interrupted }}
          <span class="label label-warning">
            <span class="glyphicon glyphicon-stop" aria-hidden="true"></span>
            interrupted
          </span>
        {{/if}}
        {{#if is_status_error }}
          <span class="label label-danger">
            <span class="glyphicon glyphicon-stop" aria-hidden="true"></span>
            error
          </span>
        {{/if}}
        {{#if is_status_fail }}
          <span class="label label-danger">
            <span class="glyphicon glyphicon-alert" aria-hidden="true"></span>
            sla fail
          </span>
        {{/if}}
      </td>
    </tr>
    {{/records}}
    </tbody>
  </table>
</script>

<!-- Agents List -->
<script id="agents_table_template" type="text/x-handlebars-template">
  <h3>Agents</h3>
  <table class="table table-striped" id="{{ table_id }}">
    <thead>
    <tr>
      <th>Agent</th>
      <th>Mode</th>
      <th>IP</th>
      <th>Node</th>
      <th>AZ</th>
    </tr>
    </thead>
    <tbody>
    {{#agents}}
    <tr>
      <td>{{ id }}</td>
      <td>{{ mode }}</td>
      <td>{{ ip }}</td>
      <td>{{ node }}</td>
      <td>{{ zone }}</td>
    </tr>
    {{/agents}}
    </tbody>
  </table>
</script>

<!-- SLA List -->
<script id="sla_table_template" type="text/x-handlebars-template">
  <h3>Agents</h3>
  <table class="table table-striped" id="{{  table_id }}">
    <thead>
    <tr>
      <th>Condition</th>
      <th>Location</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody>
    {{#records}}
    <tr>
      <td>{{ sla }}</td>
      <td>{{ location }}</td>
      <td>
        {{#if is_status_ok }}
          <span class="text-success">
            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
            {{ status }}
          </span>
        {{else}}
          <span class="text-danger">
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            {{ status }}
          </span>
        {{/if}}
      </td>
    </tr>
    {{/records}}
    </tbody>
  </table>
</script>

<!-- Errors -->
<script id="errors_template" type="text/x-handlebars-template">
  <h3>Errors</h3>
  <div class="text-danger">
    <ul>
    {{#records}}
      <li>{{ info }}<br/>{{ stderr }}{{ traceback }}</li>
    {{/records}}
    </ul>
  </div>
</script>

</body>
</html>